{"ast":null,"code":"var _jsxFileName = \"/Users/xuy4/collaborative-editor/packages/client/src/components/Editor.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { socketService } from '../services/SocketService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Editor = ({\n  roomId\n}) => {\n  _s();\n  const [lines, setLines] = useState(['']);\n  const [isConnected, setIsConnected] = useState(false);\n  useEffect(() => {\n    // Connect to socket server\n    const socket = socketService.connect();\n    socket.on('connect', () => {\n      setIsConnected(true);\n      socketService.joinRoom(roomId);\n    });\n    socket.on('disconnect', () => {\n      setIsConnected(false);\n    });\n    socket.on('document:initial-load', data => {\n      setLines(data.content);\n    });\n    socket.on('document:line-updated', data => {\n      setLines(prevLines => {\n        const newLines = [...prevLines];\n        newLines[data.lineNumber] = data.content;\n        return newLines;\n      });\n    });\n    return () => {\n      socketService.disconnect();\n    };\n  }, [roomId]);\n  const handleLineChange = (lineNumber, content) => {\n    // Update local state immediately\n    setLines(prevLines => {\n      const newLines = [...prevLines];\n      newLines[lineNumber] = content;\n      return newLines;\n    });\n\n    // Send to server\n    socketService.editLine(roomId, lineNumber, content);\n  };\n  const addLine = () => {\n    setLines(prevLines => [...prevLines, '']);\n  };\n  const userInfo = socketService.getUserInfo();\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: '20px'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: '20px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [\"Room: \", roomId]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"User: \", userInfo.username]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Status: \", isConnected ? 'ðŸŸ¢ Connected' : 'ðŸ”´ Disconnected']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: '10px'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: addLine,\n        children: \"Add Line\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        border: '1px solid #ccc',\n        padding: '10px'\n      },\n      children: lines.map((line, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '5px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            marginRight: '10px',\n            color: '#666'\n          },\n          children: [index, \":\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: line,\n          onChange: e => handleLineChange(index, e.target.value),\n          style: {\n            width: '400px',\n            fontFamily: 'monospace'\n          },\n          placeholder: \"Type code here...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 13\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 5\n  }, this);\n};\n_s(Editor, \"k6F1+oARMiVayT8peMGGDRxvS3Q=\");\n_c = Editor;\nexport default Editor;\nvar _c;\n$RefreshReg$(_c, \"Editor\");","map":{"version":3,"names":["React","useState","useEffect","socketService","jsxDEV","_jsxDEV","Editor","roomId","_s","lines","setLines","isConnected","setIsConnected","socket","connect","on","joinRoom","data","content","prevLines","newLines","lineNumber","disconnect","handleLineChange","editLine","addLine","userInfo","getUserInfo","style","padding","children","marginBottom","fileName","_jsxFileName","columnNumber","username","onClick","border","map","line","index","marginRight","color","type","value","onChange","e","target","width","fontFamily","placeholder","_c","$RefreshReg$"],"sources":["/Users/xuy4/collaborative-editor/packages/client/src/components/Editor.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { socketService } from '../services/SocketService';\n\ninterface EditorProps {\n  roomId: string;\n}\n\nconst Editor: React.FC<EditorProps> = ({ roomId }) => {\n  const [lines, setLines] = useState<string[]>(['']);\n  const [isConnected, setIsConnected] = useState(false);\n\n  useEffect(() => {\n    // Connect to socket server\n    const socket = socketService.connect();\n    \n    socket.on('connect', () => {\n      setIsConnected(true);\n      socketService.joinRoom(roomId);\n    });\n\n    socket.on('disconnect', () => {\n      setIsConnected(false);\n    });\n\n    socket.on('document:initial-load', (data) => {\n      setLines(data.content);\n    });\n\n    socket.on('document:line-updated', (data) => {\n      setLines(prevLines => {\n        const newLines = [...prevLines];\n        newLines[data.lineNumber] = data.content;\n        return newLines;\n      });\n    });\n\n    return () => {\n      socketService.disconnect();\n    };\n  }, [roomId]);\n\n  const handleLineChange = (lineNumber: number, content: string) => {\n    // Update local state immediately\n    setLines(prevLines => {\n      const newLines = [...prevLines];\n      newLines[lineNumber] = content;\n      return newLines;\n    });\n\n    // Send to server\n    socketService.editLine(roomId, lineNumber, content);\n  };\n\n  const addLine = () => {\n    setLines(prevLines => [...prevLines, '']);\n  };\n\n  const userInfo = socketService.getUserInfo();\n\n  return (\n    <div style={{ padding: '20px' }}>\n      <div style={{ marginBottom: '20px' }}>\n        <h2>Room: {roomId}</h2>\n        <p>User: {userInfo.username}</p>\n        <p>Status: {isConnected ? 'ðŸŸ¢ Connected' : 'ðŸ”´ Disconnected'}</p>\n      </div>\n\n      <div style={{ marginBottom: '10px' }}>\n        <button onClick={addLine}>Add Line</button>\n      </div>\n\n      <div style={{ border: '1px solid #ccc', padding: '10px' }}>\n        {lines.map((line, index) => (\n          <div key={index} style={{ marginBottom: '5px' }}>\n            <span style={{ marginRight: '10px', color: '#666' }}>{index}:</span>\n            <input\n              type=\"text\"\n              value={line}\n              onChange={(e) => handleLineChange(index, e.target.value)}\n              style={{ width: '400px', fontFamily: 'monospace' }}\n              placeholder=\"Type code here...\"\n            />\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default Editor;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}